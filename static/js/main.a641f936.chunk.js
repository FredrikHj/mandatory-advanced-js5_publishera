(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(58)},33:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(23),c=a.n(o),r=(a(33),a(11)),i=a(12),s=a(14),u=a(13),m=a(15),d=a(24),f=a(7),p=a(3),h=a(60),b=new h.a(!1),E=new h.a(window.localStorage.getItem("insurtUrlParts")),v=new h.a("");function g(e){v.next(e)}var j=a(9).Dropbox;function O(e){return l.a.createElement(l.a.Fragment,null," ",l.a.createElement("div",{id:"loginContainer"},l.a.createElement(p.b,{id:"connectBtn",to:"/Auth",onClick:function(){var e=new j({clientId:"8y7xb20904fqrl7"}).getAuthenticationUrl("http://fredrikHj.github.io/mandatory-js5_publishera/Auth");window.location=e}},"Anslut")))}var w=a(1),k=a(27),F=a.n(k);function L(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)(function(){var t;E.subscribe(function(e){});t=F.a.parse(e.location.hash).access_token,window.localStorage.setItem("insurtUrlParts",t),function(e){console.log(e),E.next(e)}(t),c(!0),""!=e.location.hash&&c(!0)}),!0===o?l.a.createElement(f.a,{to:"/Home"}):l.a.createElement("div",null,"Du skickas nu till Dropbox f\xf6r inloggning .....")}var C=a(9).Dropbox;function y(e){var t=Object(n.useState)(""),a=Object(w.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)([]),i=Object(w.a)(r,2),s=i[0],u=i[1],m=Object(n.useState)({}),d=Object(w.a)(m,2),p=d[0],h=d[1],b=Object(n.useState)(""),g=Object(w.a)(b,2),j=g[0],O=g[1],k=Object(n.useState)(!1),F=Object(w.a)(k,2),L=F[0],y=F[1],S="",N=new C({accessToken:E.value});function D(){var e=o.replace(/%20/g," ");return"/"===e&&(e=""),e}Object(n.useEffect)(function(){v.subscribe(function(e){c(e)});D(),N.filesListFolder({path:S}).then(function(e){var t=e.entries;u(t)}).catch(function(e){console.error(e)})},[o]);s.map(function(e){return e.path_lower});return l.a.createElement(l.a.Fragment,null,!0===L?l.a.createElement(f.a,{to:"/"}):l.a.createElement("section",{id:"actionBtnContainer"},l.a.createElement("form",null,l.a.createElement("input",{id:"itemToUpLoad",type:"file",onChange:function(e){e.preventDefault(),h(e.target.files)}}),l.a.createElement("button",{className:"button btnUpLoad",type:"submit",value:"",onClick:function(e){e.preventDefault(),console.log(p[0]);var t=o.replace(/%20/g," ");D(),N.filesUpload({contents:p[0],path:v.value+"/"+p[0].name,mode:"add"}).then(function(e){N.filesListFolder({path:t}).then(function(e){var t=e.entries;console.log(u),u(t)})})}},"Ladda Upp")),l.a.createElement("form",null,l.a.createElement("i",{className:"button material-icons",id:"newFolder",onClick:function(e){e.preventDefault(),console.log(j),D(),N.filesCreateFolderV2({path:o+"/"+j}).then(function(e){N.filesListFolder({path:S}).then(function(e){var t=e.entries;console.log(u),u(t)})})}},"create_new_folder"),l.a.createElement("input",{id:"createFoldersName",type:"text",onChange:function(e){e.preventDefault();var t=e.target.value;O(t)}})),l.a.createElement("button",{className:"button logOutBtn",onClick:function(){y(!0),console.log(L),localStorage.removeItem("insurtUrlParts")}}," Logga Ut")))}var S=a(19),N=a(9).Dropbox,D=0,I=0;function x(e){var t,a=Object(n.useState)(""),o=Object(w.a)(a,2),c=o[0],r=o[1],i=e.fileObj,s=i.path_lower;return function(a,n){if("folder"===a[".tag"]){I++;D++,function(e,t){new N({accessToken:E.value}).filesListFolder({path:e}).then(function(e){var a=e.entries.length;if(0===a){var n=l.a.createElement("p",null," ( Mappen \xe4r tom! )");t=n.props.children}0!=a&&(t=""),r(t)})}(n),t=l.a.createElement(l.a.Fragment,null,l.a.createElement("td",{colSpan:"3",id:n,onClick:e.downLoadFile},l.a.createElement("i",{className:"material-icons starBtnFolders"},"star"),l.a.createElement(p.b,{to:"/Home"+n,className:"folderLink",id:D},l.a.createElement("i",{className:"material-icons folders"}," folder "),l.a.createElement("span",{className:"folderName"},"-",a.name+c))),l.a.createElement("td",null,l.a.createElement("i",{className:"material-icons",id:n,"data-countitem":I,onClick:e.removeItem},"clear")))}}(i,s),function(a,n){"file"===a[".tag"]&&(I++,t=l.a.createElement(l.a.Fragment,null,l.a.createElement("td",{id:n,onClick:e.downLoadFile},l.a.createElement("i",{className:"material-icons starBtnFiles"},"star"),l.a.createElement("img",{className:"files",src:e.thumbnail,alt:"En fil ikon"}),a.name),l.a.createElement("td",null,function(e){var t=e.split("T")[1].split(":");return e.split("T")[0]+" | "+t[0]+":"+t[1]}(a.client_modified)),l.a.createElement("td",null,function(e){var t=e/1048576;return parseFloat(Math.round(100*t)/100).toFixed(2)}(a.size)+"mb"),l.a.createElement("td",null,l.a.createElement("i",{className:"material-icons",id:n,"data-countitem":I,onClick:e.removeItem},"clear"))))}(i,s),function(e){var t=e.split("Home").reverse()[0];"Home"===t&&(t="");g(t)}(e.pathLocation.pathname),I===e.showFileList.length&&(I=0),t}var B=a(9).Dropbox;function U(e){var t=Object(n.useState)(""),a=Object(w.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),i=Object(w.a)(r,2),s=(i[0],i[1],new B({accessToken:E.value})),u=e.fileObj;Object(n.useEffect)(function(){s.filesGetThumbnail({path:u.path_lower,size:"w64h64"}).then(function(e){var t=URL.createObjectURL(e.fileBlob);c(t)}).catch(function(e){})},[u.path_lower]);return l.a.createElement(x,{pathLocation:e.pathLocation,fileObj:e.fileObj,showFileList:e.showFileList,thumbnail:o,removeItem:e.removeItem,downLoadFile:e.downLoadFile})}var _=a(9).Dropbox;function T(e){var t=Object(n.useState)(""),a=Object(w.a)(t,2),o=(a[0],a[1]),c=Object(n.useState)(""),r=Object(w.a)(c,2),i=r[0],s=r[1],u=Object(n.useState)([]),m=Object(w.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)(!1),h=Object(w.a)(p,2),b=h[0],j=h[1],O=Object(n.useState)(""),k=Object(w.a)(O,2),F=k[0],L=k[1],C=Object(n.useState)(""),y=Object(w.a)(C,2),N=y[0],D=y[1],I=0;console.log(E.value);var x=new _({accessToken:E.value});function B(e){e.target.id;console.log()}function T(e){var t=e.target.id,a=parseInt(e.target.dataset.countitem);console.log(a);var n=t.split("/").reverse();n[0].split(".");console.log(n[0]),L(n[0]),D(t),j(!0)}return Object(n.useEffect)(function(){E.subscribe(function(e){o(e)});v.subscribe(function(e){s(e)});var e=i.replace(/%20/g," ");"/"===e&&(e=""),x.filesListFolder({path:e}).then(function(e){var t=e.entries;f(t),0===t.length&&(console.log("Tomt!"),setTimeout(function(){window.location.reload(),g("/Home")},1e3))}).catch(function(e){console.error(e)})},[i]),l.a.createElement("section",{id:"tContainer"},l.a.createElement("div",{id:"askDelContainer",style:!0===b?{display:"block"}:{display:"none"}},l.a.createElement("p",{id:"delAsk"},"Radera "+F+" ?"),l.a.createElement("section",{id:"askDelBtnConatiner"},l.a.createElement("button",{className:"button askDelBtn",onClick:function(){j(!1)}},"Nej"),l.a.createElement("button",{className:"button askDelBtn",onClick:function(){x.filesDeleteV2({path:N});var e=[].concat(Object(S.a)(d.slice(0,I)),Object(S.a)(d.slice(I+1)));console.log(e),f(e),j(!1)}},"Ja"))),0!=d.length?l.a.createElement("table",{id:"itemContainer"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Mapp / Fil"),l.a.createElement("th",null,"\xc4ndrad"),l.a.createElement("th",null,"Storlek"),l.a.createElement("th",null,"Verktyg"))),l.a.createElement("tbody",null,d.map(function(t,a){return l.a.createElement("tr",{className:"fontColor",key:a},l.a.createElement(U,{pathLocation:e.location,fileObj:t,listLength:d.length,removeItem:T,showFileList:d,downLoadFile:B}))}))):"H\xe4mtar listan!")}function H(e){return l.a.createElement("section",null,l.a.createElement("p",null,"Var \xe4r jag:",e.location.pathname.split("/").map(function(e,t,a){var n="/"+a.slice(1,t+1).join("/"),o="",c="";return""===e&&(o="",c="pathLink1"),""!=e&&"Home"!=e&&(o="/",c="pathLink2"),l.a.createElement(p.b,{to:n,key:t,className:c},o+e.charAt(0).toUpperCase()+e.slice(1))})))}var A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;e=!0,b.next(e)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"contentContainer"},l.a.createElement("main",{id:"contentContainer"},l.a.createElement(H,{location:this.props.location}),l.a.createElement(T,{location:this.props.location,showFileList:this.state.showFileList,getFileItem:this.getFileItem})),l.a.createElement("aside",null,l.a.createElement(y,null))))}}]),t}(n.PureComponent),M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={authorizate:!1,logedIn:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(b.subscribe(function(t){t&&e.setState({logedIn:b.value})}).unsubscribe(),!1===this.state.authorizate)return l.a.createElement(f.a,{to:"/"});window.location.hash}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.Helmet,null,l.a.createElement("meta",{charSet:"utf-8"}),l.a.createElement("title",null,"Fil Tj\xe4nst - ",!1===this.state.logedIn?"Ej inloggad":"Inloggad"),l.a.createElement("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"})),l.a.createElement("div",{id:"appBody"},l.a.createElement("section",{id:"appBody__dashboard"}),l.a.createElement("main",{id:"appBody__mainContent"},l.a.createElement("header",{id:"header"},l.a.createElement("section",null,l.a.createElement("p",{id:"headline"},"En Fil tj\xe4nst"),l.a.createElement("div",null))),l.a.createElement("main",{id:"mainContent"},l.a.createElement(p.a,{basename:"/mandatory-advanced-js5_publishera"},l.a.createElement(f.b,{exact:!0,path:"/",component:O}),l.a.createElement(f.b,{path:"/Auth",component:L}),l.a.createElement(f.b,{path:"/Home",component:A}))),l.a.createElement("footer",null,"Uppf\xf6rd av Team Fredrik"))))}}]),t}(n.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.a641f936.chunk.js.map